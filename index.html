<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Christmas Cracker - Festive Reality Check üéÑ</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-font-smoothing: antialiased;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial, sans-serif;
      background: #0a0a0a;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1.5rem;
      overflow-x: hidden;
    }

    .hidden { display: none !important; }

    @keyframes snowfall {
      to { transform: translateY(100vh) translateX(50px); }
    }
    
    @keyframes marquee {
      to { transform: translateX(-50%); }
    }
    
    @keyframes pullLeft {
      to { transform: translateX(-60px) scaleX(0.8); opacity: 0; }
    }
    
    @keyframes pullRight {
      to { transform: translateX(60px) scaleX(0.8); opacity: 0; }
    }
    
    @keyframes pop {
      to { transform: scale(0.8); opacity: 0; }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(8px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .snow-container {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
    }

    .snowflake {
      position: absolute;
      color: white;
      opacity: 0.6;
      animation: snowfall linear infinite;
    }

    .marquee-wrapper {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: #dc2626;
      padding: 0.5rem 0;
      overflow: hidden;
      white-space: nowrap;
      z-index: 50;
    }

    .marquee {
      display: inline-block;
      animation: marquee 20s linear infinite;
    }

    .marquee span {
      color: white;
      font-size: 0.875rem;
      font-weight: bold;
      letter-spacing: 0.05em;
      margin: 0 1rem;
    }

    .container {
      max-width: 48rem;
      width: 100%;
    }

    .header {
      text-align: center;
      margin-bottom: 4rem;
      margin-top: 3rem;
    }

    .header-subtitle {
      color: #737373;
      font-size: 0.75rem;
      letter-spacing: 0.1em;
      margin-bottom: 1.5rem;
    }

    .header-title {
      color: white;
      font-size: 3rem;
      font-weight: bold;
      margin-bottom: 1.5rem;
      line-height: 1;
      font-family: 'Bebas Neue', sans-serif;
    }

    .header-desc {
      color: #a3a3a3;
      font-size: 0.875rem;
      max-width: 28rem;
      margin: 0 auto;
      line-height: 1.625;
    }

    .cracker-wrapper {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0;
    }

    .pulling .left-end { animation: pullLeft 0.7s forwards; }
    .pulling .right-end { animation: pullRight 0.7s forwards; }
    .popped .cracker-body { animation: pop 0.3s forwards; }

    .cracker-end {
      width: 4rem;
      height: 6rem;
      position: relative;
      cursor: pointer;
    }

    .cracker-body {
      position: relative;
      width: 200px;
      height: 100px;
      cursor: pointer;
      background: #dc2626;
    }

    .cracker-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 0.75rem;
      font-weight: bold;
      letter-spacing: 0.1em;
    }

    .stripe-top, .stripe-bottom {
      position: absolute;
      left: 0;
      right: 0;
      height: 0.75rem;
      background: linear-gradient(to right, #eab308, #facc15);
    }

    .stripe-top { top: 0; }
    .stripe-bottom { bottom: 0; }

    .sparkle {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #fde047;
      font-size: 1.25rem;
    }

    .results {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .fade-in {
      animation: fadeIn 0.5s forwards;
      opacity: 0;
    }

    .pop-title {
      color: white;
      font-size: 3.75rem;
      font-weight: bold;
      font-family: 'Bebas Neue', sans-serif;
      cursor: pointer;
      text-align: center;
      margin-bottom: 0.5rem;
    }

    .pop-title:hover { opacity: 0.8; }

    .pop-sub {
      color: #737373;
      font-size: 0.75rem;
      letter-spacing: 0.1em;
      text-align: center;
    }

    .card {
      border: 2px solid #dc2626;
      padding: 2rem;
    }

    .card-title {
      color: white;
      font-size: 1.875rem;
      font-weight: bold;
      margin-bottom: 1.5rem;
      font-family: 'Bebas Neue', sans-serif;
    }

    .card-subtitle {
      color: #a3a3a3;
      font-size: 0.75rem;
      letter-spacing: 0.1em;
      margin-bottom: 1rem;
    }

    .card-content {
      color: #d4d4d4;
      font-size: 1rem;
      line-height: 1.625;
      margin-bottom: 1.5rem;
    }

    .card-cta {
      color: white;
      font-size: 0.875rem;
      font-weight: 500;
    }

    .white-card {
      background: white;
      padding: 2rem;
    }

    .white-card-label {
      color: #525252;
      font-size: 0.75rem;
      letter-spacing: 0.1em;
      margin-bottom: 0.75rem;
    }

    .white-card-text {
      color: black;
      font-size: 1.25rem;
      font-weight: 500;
    }

    .gift-card {
      border: 2px solid #404040;
      padding: 2rem;
      display: flex;
      gap: 1rem;
    }

    .gift-icon {
      font-size: 2.25rem;
    }

    .gift-label {
      color: #737373;
      font-size: 0.75rem;
      letter-spacing: 0.1em;
      margin-bottom: 0.5rem;
    }

    .gift-text {
      color: #e5e5e5;
      font-size: 1rem;
      line-height: 1.625;
    }

    .buttons {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      padding-top: 1rem;
    }

    button {
      padding: 1rem 2rem;
      font-size: 0.875rem;
      font-weight: bold;
      letter-spacing: 0.1em;
      cursor: pointer;
      border: none;
      transition: all 0.15s;
    }

    .btn-share {
      background: linear-gradient(to right, #dc2626, #b91c1c);
      color: white;
    }

    .btn-share:hover {
      background: linear-gradient(to right, #b91c1c, #991b1b);
    }

    .btn-reset {
      background: white;
      color: black;
    }

    .btn-reset:hover {
      background: #e5e5e5;
    }

    .footer-note {
      text-align: center;
      padding-top: 2rem;
      color: #525252;
      font-size: 0.75rem;
      line-height: 1.625;
      max-width: 28rem;
      margin: 0 auto;
    }

    .footer {
      text-align: center;
      margin-top: 4rem;
      color: #525252;
      font-size: 0.75rem;
      letter-spacing: 0.1em;
    }

    @media (min-width: 640px) {
      .buttons { flex-direction: row; }
    }

    @media (min-width: 768px) {
      .header-title { font-size: 4.5rem; }
      .cracker-end { width: 5rem; height: 8rem; }
      .pop-title { font-size: 6rem; }
      .card { padding: 3rem; }
      .card-title { font-size: 3rem; }
      .card-content { font-size: 1.125rem; }
      .white-card { padding: 2.5rem; }
      .white-card-text { font-size: 1.5rem; }
      .gift-card { padding: 2.5rem; }
      .gift-text { font-size: 1.125rem; }
      .results { gap: 2rem; }
    }
  </style>
</head>
<body>
  <div class="snow-container" id="snow"></div>
  <div class="marquee-wrapper" id="marquee">
    <div class="marquee">
      <span>üéÑ UNCOMFORTABLE TRUTHS ¬∑ EMOTIONAL HONESTY ¬∑ RADICAL ACCEPTANCE üéÑ</span>
      <span>üéÑ UNCOMFORTABLE TRUTHS ¬∑ EMOTIONAL HONESTY ¬∑ RADICAL ACCEPTANCE üéÑ</span>
      <span>üéÑ UNCOMFORTABLE TRUTHS ¬∑ EMOTIONAL HONESTY ¬∑ RADICAL ACCEPTANCE üéÑ</span>
    </div>
  </div>

  <div class="container">
    <div id="homeScreen">
      <div class="header">
        <div class="header-subtitle">FESTIVE REALITY CHECK üéÑ</div>
        <h1 class="header-title">PULL FOR<br/>TRUTH</h1>
        <p class="header-desc">
          Honest mental health chat disguised as festive fun.<br/>
          Click to reveal your uncomfortable truth.
        </p>
      </div>

      <div class="cracker-wrapper" id="crackerWrapper">
        <div class="cracker-end left-end" onclick="pull()" style="clip-path: polygon(0 50%, 100% 25%, 100% 75%); background: linear-gradient(135deg, #dc2626, #b91c1c);">
          <div class="sparkle">‚ú®</div>
        </div>
        <div class="cracker-body" onclick="pull()">
          <div class="cracker-text">CLICK</div>
          <div class="stripe-top"></div>
          <div class="stripe-bottom"></div>
        </div>
        <div class="cracker-end right-end" onclick="pull()" style="clip-path: polygon(100% 50%, 0 25%, 0 75%); background: linear-gradient(135deg, #b91c1c, #dc2626);">
          <div class="sparkle">‚ú®</div>
        </div>
      </div>

      <div class="footer">DESIGNED FOR EMOTIONAL HONESTY üéÑ</div>
    </div>

    <div id="resultScreen" class="hidden">
      <div class="results">
        <div class="fade-in">
          <div class="pop-title" onclick="reset()">*POP* üéÑ</div>
          <div class="pop-sub">YOUR REALITY CHECK</div>
        </div>

        <div class="fade-in card" style="animation-delay: 0.1s">
          <div class="card-subtitle" id="tipSub"></div>
          <h2 class="card-title" id="tipTitle"></h2>
          <p class="card-content" id="tipContent"></p>
          <div class="card-cta" id="tipCta"></div>
        </div>

        <div class="fade-in white-card" style="animation-delay: 0.2s">
          <div class="white-card-label">SLIGHTLY HELPFUL REMINDER üéÅ</div>
          <p class="white-card-text" id="affirmation"></p>
        </div>

        <div class="fade-in gift-card" style="animation-delay: 0.3s">
          <div class="gift-icon">üéÅ</div>
          <div>
            <div class="gift-label">TAKE THIS, YOU NEED IT</div>
            <p class="gift-text" id="gift"></p>
          </div>
        </div>

        <div class="fade-in buttons" style="animation-delay: 0.4s">
          <button class="btn-share" onclick="share()">üì± SHARE THIS</button>
          <button class="btn-reset" onclick="reset()">PULL ANOTHER</button>
        </div>

        <div class="fade-in footer-note" style="animation-delay: 0.5s">
          If you're properly struggling (not just the usual existential dread), talk to someone. 
          In the UK, Samaritans are on 116 123. They're actually helpful, surprisingly.
        </div>
      </div>
    </div>
  </div>

  <script>
    const tips = [
      { title: "FEELING LIKE SHIT IS DATA", subtitle: "Uncomfortable Truth No. 1", content: "Your brain isn't broken for feeling rubbish. It's actually doing its job by telling you something needs attention. Whether you listen is another matter entirely.", cta: "Misery loves company (therapy)" },
      { title: "THE STRATEGIC CRY", subtitle: "Uncomfortable Truth No. 2", content: "Sometimes you just need a proper cry in the shower. It's not giving up‚Äîit's maintenance. Like defragging your emotional hard drive, but wetter.", cta: "Hydration comes in many forms" },
      { title: "EVERYONE'S FAKING IT", subtitle: "Uncomfortable Truth No. 3", content: "That person who looks like they've got it together? They don't. They're just better at hiding the chaos. We're all just winging it whilst pretending we have a plan.", cta: "Imposter syndrome is a club, not a flaw" },
      { title: "SELF-CARE IS CRINGE BUT NECESSARY", subtitle: "Uncomfortable Truth No. 4", content: "Yes, bubble baths and face masks feel silly. But so does having a breakdown in Sainsbury's. Pick your embarrassment wisely.", cta: "Choose your battles (and baths)" },
      { title: "YOU CAN'T OPTIMISE YOUR WAY OUT", subtitle: "Uncomfortable Truth No. 5", content: "No amount of morning routines, bullet journals, or productivity hacks will fix everything. Sometimes life's just a bit shit and you have to sit with that.", cta: "Accept the chaos, embrace the mess" },
      { title: "THERAPY ISN'T MAGIC", subtitle: "Uncomfortable Truth No. 6", content: "Talking to someone won't instantly fix you. It just means you're not suffering alone whilst also paying someone to witness your emotional car crash. Still worth it.", cta: "Professional validation hits different" },
      { title: "REST WON'T FIX CAPITALISM", subtitle: "Uncomfortable Truth No. 7", content: "Taking a nap won't solve systemic problems, but it might stop you from losing it entirely. Small mercies. Do what you can, then take a kip.", cta: "Survive now, revolt later" },
      { title: "YOUR STANDARDS ARE UNREALISTIC", subtitle: "Uncomfortable Truth No. 8", content: "The bar you've set for yourself is absurd and no one else is judging you this harshly. Lower it. Way lower. Ground floor, actually. Maybe basement.", cta: "Mediocrity is underrated" },
      { title: "SOCIAL MEDIA IS A HIGHLIGHT REEL", subtitle: "Uncomfortable Truth No. 9", content: "Everyone's posting their wins, not their 3am anxiety spirals. You're comparing your behind-the-scenes to everyone else's carefully curated performance. Stop it.", cta: "Your mess is normal, their feed is not" },
      { title: "BOUNDARIES MAKE PEOPLE ANGRY", subtitle: "Uncomfortable Truth No. 10", content: "Setting boundaries means some people will be upset with you. That's the point. Not everyone deserves unlimited access to your time and energy, even if they think they do.", cta: "Their discomfort isn't your responsibility" },
      { title: "YOU'RE ALLOWED TO CHANGE YOUR MIND", subtitle: "Uncomfortable Truth No. 11", content: "That thing you said you'd do? That commitment from past-you? You can cancel it. You can change. Past-you didn't know what present-you would need. It's fine.", cta: "Growth looks like inconsistency sometimes" },
      { title: "BEING BUSY ISN'T A PERSONALITY", subtitle: "Uncomfortable Truth No. 12", content: "Stop wearing exhaustion as a badge of honour. Being constantly overwhelmed doesn't make you important, it makes you tired. Rest isn't earned, it's required.", cta: "Productivity culture is a scam" },
      { title: "SOME RELATIONSHIPS NEED TO END", subtitle: "Uncomfortable Truth No. 13", content: "Not every friendship is meant to last forever. Some people were right for a season and wrong for now. Letting go isn't failure, it's honesty.", cta: "Outgrowing people is growth" },
      { title: "YOUR PARENTS WERE JUST WINGING IT", subtitle: "Uncomfortable Truth No. 14", content: "They didn't have all the answers. They made it up as they went along, just like you're doing now. Understanding this doesn't excuse everything, but it might explain some things.", cta: "We're all just confused children in ageing bodies" },
      { title: "MOTIVATION IS A LIE", subtitle: "Uncomfortable Truth No. 15", content: "Waiting to feel motivated is waiting forever. Discipline is showing up even when you'd rather not. Especially when you'd rather not, actually.", cta: "Action creates motivation, not the other way round" },
      { title: "YOU CAN'T HELP EVERYONE", subtitle: "Uncomfortable Truth No. 16", content: "Setting yourself on fire to keep others warm just means you both end up cold eventually. You're allowed to prioritise your own oxygen mask first.", cta: "Self-preservation isn't selfish" },
      { title: "PERFECTIONISM IS JUST FEAR", subtitle: "Uncomfortable Truth No. 17", content: "That impossibly high standard isn't excellence, it's procrastination wearing a fancy outfit. Fear of being judged, wrapped up in the guise of 'doing it properly.'", cta: "Done is better than perfect" },
      { title: "YOUR STRUGGLES ARE VALID", subtitle: "Uncomfortable Truth No. 18", content: "Just because someone has it worse doesn't mean you have it good. Pain isn't a competition. Your feelings are legitimate even if they seem trivial to others.", cta: "Comparison is the thief of self-compassion" },
      { title: "NOSTALGIA IS A LIAR", subtitle: "Uncomfortable Truth No. 19", content: "The past wasn't better, you've just forgotten the bad bits. Your brain is editing reality like a dodgy Instagram filter. The 'good old days' had plenty of shit days too.", cta: "Memory is selective, reality was messy" },
      { title: "ASKING FOR HELP IS STRENGTH", subtitle: "Uncomfortable Truth No. 20", content: "Struggling alone doesn't make you tough, it makes you isolated. Admitting you need support takes more courage than pretending you're fine. Stop being a martyr.", cta: "Vulnerability is brave, not weak" },
      { title: "YOU'RE NOT LAZY, YOU'RE BURNT OUT", subtitle: "Uncomfortable Truth No. 21", content: "That overwhelming exhaustion isn't a character flaw. You're not broken. You've been running on fumes whilst being told to push harder. Your body is staging a coup.", cta: "Rest is the answer, not more coffee" },
      { title: "CLOSURE IS A MYTH", subtitle: "Uncomfortable Truth No. 22", content: "Some things don't get tied up neatly. Some people never apologise. Some questions don't have answers. You have to make peace with the ambiguity and move on anyway.", cta: "Let go without the satisfying ending" },
      { title: "HAPPINESS ISN'T THE DEFAULT", subtitle: "Uncomfortable Truth No. 23", content: "You're not meant to be happy all the time. Contentment, frustration, sadness, joy‚Äîthey're all part of being human. Chasing constant happiness is exhausting and pointless.", cta: "Aim for okay, not ecstatic" },
      { title: "YOUR TWENTIES ARE SUPPOSED TO BE CONFUSING", subtitle: "Uncomfortable Truth No. 24", content: "Everyone else is also lost, they're just quieter about it. No one has their life sorted at 25. Or 35. Or 45. We're all just pretending and hoping no one notices.", cta: "Confusion is the correct response to life" },
      { title: "IT'S OKAY TO NOT BE OKAY", subtitle: "Uncomfortable Truth No. 25", content: "You don't need to perform wellness. You don't need to have it together. Some days survival is success. Give yourself permission to struggle without shame.", cta: "Existing is enough sometimes" }
    ];

    const affirmations = [
      "You're doing alright for someone who's winging it",
      "Being a functional disaster is still functional",
      "Your anxiety is lying to you (probably)",
      "Everyone's a mess, some are just quieter about it",
      "You've survived 100% of your bad days so far. Solid track record.",
      "It's fine to be fine with not being fine",
      "Not today, existential dread. Not today.",
      "Good enough is literally enough",
      "Your past self would be impressed you're still here",
      "Struggling doesn't mean failing",
      "You don't owe anyone an explanation for taking care of yourself",
      "Being tired of trying doesn't make you weak",
      "Your feelings make sense, even when they don't",
      "You're allowed to rest before you're completely broken",
      "Not everyone will understand you, and that's fine",
      "You're more resilient than you give yourself credit for",
      "Asking for help doesn't diminish your worth",
      "You're allowed to take up space",
      "Your mental health is just as important as your physical health",
      "Progress isn't always visible, but it's still happening",
      "You're not behind‚Äîeveryone's on their own timeline",
      "It's okay to be a work in progress forever",
      "You deserve kindness, especially from yourself",
      "Bad days don't cancel out good ones",
      "You're allowed to change, grow, and contradict past versions of yourself"
    ];

    const gifts = [
      "Permission to cancel plans without guilt",
      "The knowledge that everyone else is also pretending",
      "Acceptance that you can't fix yourself in one weekend",
      "Understanding that rest isn't lazy, it's strategic",
      "Acknowledgment that sometimes a cup of tea IS the answer",
      "Recognition that asking 'are you okay' is harder than it sounds",
      "The reminder that professional help isn't admitting defeat",
      "Validation that feeling overwhelmed doesn't make you weak",
      "Permission to say no without elaborate excuses",
      "Understanding that healing isn't linear or tidy",
      "Acceptance that some days surviving is thriving",
      "The reminder that you don't have to earn rest",
      "Recognition that setting boundaries isn't selfish",
      "Permission to disappoint people who had unrealistic expectations",
      "Understanding that your worth isn't tied to productivity",
      "Acceptance that you can't please everyone (and shouldn't try)",
      "The reminder that comparison is a joy thief",
      "Recognition that your struggles are valid regardless of others'",
      "Permission to take things one day at a time",
      "Understanding that closure doesn't always come from others",
      "Acceptance that some relationships are meant to end",
      "The reminder that being vulnerable is courageous",
      "Recognition that self-care isn't always comfortable",
      "Permission to outgrow people, places, and past versions of yourself",
      "Understanding that asking for space doesn't mean you don't care"
    ];

    let currentTip = null;

    function random(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function pull() {
      const wrapper = document.getElementById('crackerWrapper');
      wrapper.classList.add('pulling');
      
      setTimeout(() => {
        wrapper.classList.add('popped');
        setTimeout(() => {
          showResults();
        }, 400);
      }, 700);
    }

    function showResults() {
      currentTip = random(tips);
      document.getElementById('tipSub').textContent = currentTip.subtitle;
      document.getElementById('tipTitle').textContent = currentTip.title;
      document.getElementById('tipContent').textContent = currentTip.content;
      document.getElementById('tipCta').textContent = '‚Äî ' + currentTip.cta;
      document.getElementById('affirmation').textContent = '"' + random(affirmations) + '"';
      document.getElementById('gift').textContent = random(gifts);

      document.getElementById('homeScreen').classList.add('hidden');
      document.getElementById('marquee').classList.add('hidden');
      document.getElementById('resultScreen').classList.remove('hidden');
    }

    function reset() {
      document.getElementById('homeScreen').classList.remove('hidden');
      document.getElementById('marquee').classList.remove('hidden');
      document.getElementById('resultScreen').classList.add('hidden');
      
      const wrapper = document.getElementById('crackerWrapper');
      wrapper.classList.remove('pulling', 'popped');
    }

    function share() {
      if (!currentTip) return;
      
      const canvas = document.createElement('canvas');
      canvas.width = 1080;
      canvas.height = 1920;
      const ctx = canvas.getContext('2d');
      
      ctx.fillStyle = '#0a0a0a';
      ctx.fillRect(0, 0, 1080, 1920);
      
      ctx.fillStyle = '#dc2626';
      ctx.fillRect(0, 0, 1080, 30);
      ctx.fillRect(0, 1890, 1080, 30);
      
      ctx.fillStyle = '#ffffff';
      ctx.font = 'bold 70px Arial';
      ctx.textAlign = 'center';
      ctx.fillText('UNCOMFORTABLE TRUTH', 540, 350);
      
      ctx.fillStyle = '#a3a3a3';
      ctx.font = '28px Arial';
      ctx.fillText(currentTip.subtitle, 540, 420);
      
      ctx.fillStyle = '#dc2626';
      ctx.fillRect(100, 480, 880, 4);
      
      ctx.fillStyle = '#ffffff';
      ctx.font = 'bold 60px Arial';
      const words = currentTip.title.split(' ');
      let y = 600;
      words.forEach(word => {
        ctx.fillText(word, 540, y);
        y += 75;
      });
      
      ctx.fillStyle = '#d4d4d4';
      ctx.font = '32px Arial';
      const contentWords = currentTip.content.split(' ');
      let line = '';
      y += 50;
      contentWords.forEach(word => {
        const test = line + word + ' ';
        if (ctx.measureText(test).width > 900 && line) {
          ctx.fillText(line, 540, y);
          line = word + ' ';
          y += 50;
        } else {
          line = test;
        }
      });
      ctx.fillText(line, 540, y);
      
      ctx.fillStyle = '#ffffff';
      ctx.font = 'bold 26px Arial';
      ctx.fillText('‚Äî ' + currentTip.cta, 540, y + 100);
      
      ctx.fillStyle = '#737373';
      ctx.font = '22px Arial';
      ctx.fillText('FESTIVE REALITY CHECK', 540, 1850);
      
      canvas.toBlob(blob => {
        const url = URL.createObjectURL(blob);
        if (navigator.share) {
          const file = new File([blob], 'christmas-cracker.png', { type: 'image/png' });
          navigator.share({ 
            files: [file], 
            title: 'Uncomfortable Truth', 
            text: 'My festive reality check üéÑ' 
          }).then(() => {
            URL.revokeObjectURL(url);
          }).catch(() => {
            openInNewTab(url);
          });
        } else {
          openInNewTab(url);
        }
      });
    }
    
    function openInNewTab(url) {
      const tab = window.open('', '_blank');
      if (tab) {
        tab.document.write('<html><head><title>Your Truth</title><style>body{margin:0;background:#0a0a0a;display:flex;align-items:center;justify-content:center;min-height:100vh;flex-direction:column;padding:20px}img{max-width:600px;width:100%;box-shadow:0 20px 60px rgba(0,0,0,0.5)}p{color:#fff;margin-top:20px;text-align:center}button{background:#dc2626;color:#fff;border:none;padding:12px 24px;font-weight:bold;cursor:pointer;margin-top:15px}button:hover{background:#b91c1c}</style></head><body><img src="' + url + '"><p>Long-press (mobile) or right-click (desktop) to save and share</p><button onclick="var a=document.createElement(\'a\');a.href=\'' + url + '\';a.download=\'christmas-cracker.png\';a.click()">DOWNLOAD</button></body></html>');
      } else {
        const a = document.createElement('a');
        a.href = url;
        a.download = 'christmas-cracker.png';
        a.click();
      }
    }

    // Snow
    const snow = document.getElementById('snow');
    for(let i = 0; i < 25; i++) {
      const flake = document.createElement('div');
      flake.className = 'snowflake';
      flake.textContent = '‚ùÑ';
      flake.style.left = Math.random() * 100 + '%';
      flake.style.fontSize = (Math.random() * 12 + 8) + 'px';
      flake.style.animationDuration = (Math.random() * 10 + 15) + 's';
      flake.style.animationDelay = (Math.random() * 5) + 's';
      snow.appendChild(flake);
    }
  </script>
</body>
</html>
